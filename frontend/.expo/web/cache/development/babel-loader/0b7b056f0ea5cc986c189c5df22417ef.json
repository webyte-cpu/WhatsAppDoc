{"ast":null,"code":"\"use strict\";\n/**\r\n * @license\r\n * Copyright Akveo. All Rights Reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n */\n\nvar _extends = require(\"@babel/runtime/helpers/extends\");\n\nvar _defineProperty = require(\"@babel/runtime/helpers/defineProperty\");\n\nvar _objectWithoutProperties = require(\"@babel/runtime/helpers/objectWithoutProperties\");\n\nvar _classCallCheck = require(\"@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"@babel/runtime/helpers/createClass\");\n\nvar _inherits = require(\"@babel/runtime/helpers/inherits\");\n\nvar _possibleConstructorReturn = require(\"@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"@babel/runtime/helpers/getPrototypeOf\");\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar react_1 = __importDefault(require(\"react\"));\n\nvar react_native_1 = require(\"react-native-web/dist/index\");\n\nvar devsupport_1 = require(\"../../devsupport\");\n\nvar TabIndicator = function (_react_1$default$Comp) {\n  _inherits(TabIndicator, _react_1$default$Comp);\n\n  var _super = _createSuper(TabIndicator);\n\n  function TabIndicator() {\n    var _this;\n\n    _classCallCheck(this, TabIndicator);\n\n    _this = _super.apply(this, arguments);\n    _this.contentOffset = new react_native_1.Animated.Value(0);\n\n    _this.onContentOffsetAnimationStateChanged = function (state) {};\n\n    _this.onContentOffsetAnimationStateEnd = function (result) {};\n\n    _this.createOffsetAnimation = function (params) {\n      return react_native_1.Animated.timing(_this.contentOffset, {\n        toValue: devsupport_1.RTLService.select(params.offset, -params.offset),\n        duration: 200,\n        easing: react_native_1.Easing.linear,\n        useNativeDriver: react_native_1.Platform.OS !== 'web'\n      });\n    };\n\n    _this.onLayout = function (event) {\n      _this.indicatorWidth = event.nativeEvent.layout.width;\n\n      _this.scrollToOffset({\n        offset: _this.indicatorWidth * _this.props.selectedPosition,\n        animated: false\n      });\n    };\n\n    _this.getComponentStyle = function () {\n      var widthPercent = 100 / _this.props.positions;\n      return {\n        width: widthPercent + \"%\",\n        transform: [{\n          translateX: _this.contentOffset\n        }]\n      };\n    };\n\n    return _this;\n  }\n\n  _createClass(TabIndicator, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.contentOffset.addListener(this.onContentOffsetAnimationStateChanged);\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps) {\n      return this.props.selectedPosition !== nextProps.selectedPosition;\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      var index = this.props.selectedPosition;\n      this.scrollToIndex({\n        index: index,\n        animated: true\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.contentOffset.removeAllListeners();\n    }\n  }, {\n    key: \"scrollToIndex\",\n    value: function scrollToIndex(params) {\n      var index = params.index,\n          rest = _objectWithoutProperties(params, [\"index\"]);\n\n      var offset = this.indicatorWidth * index;\n      this.scrollToOffset(_objectSpread({\n        offset: offset\n      }, rest));\n    }\n  }, {\n    key: \"scrollToOffset\",\n    value: function scrollToOffset(params) {\n      this.createOffsetAnimation(params).start(this.onContentOffsetAnimationStateEnd);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          style = _this$props.style,\n          viewProps = _objectWithoutProperties(_this$props, [\"style\"]);\n\n      var evaStyle = this.getComponentStyle();\n      return react_1.default.createElement(react_native_1.Animated.View, _extends({}, viewProps, {\n        style: [style, evaStyle],\n        onLayout: this.onLayout\n      }));\n    }\n  }]);\n\n  return TabIndicator;\n}(react_1.default.Component);\n\nexports.TabIndicator = TabIndicator;\nTabIndicator.defaultProps = {\n  selectedPosition: 0\n};","map":{"version":3,"sources":["../../../../../src/components/ui/shared/tabIndicator.component.tsx"],"names":[],"mappings":";AAAA;;;;AAIG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEH,IAAA,OAAA,GAAA,eAAA,CAAA,OAAA,CAAA,OAAA,CAAA,CAAA;;;;AASA,IAAA,YAAA,GAAA,OAAA,oBAAA;;IASa,Y;;;;;AAAb,0BAAA;AAAA;;AAAA;;;AAOU,UAAA,aAAA,GAAgC,IAAI,cAAA,CAAA,QAAA,CAAS,KAAb,CAAmB,CAAnB,CAAhC;;AAkDA,UAAA,oCAAA,GAAuC,UAAC,KAAD,EAA6B,CAE3E,CAFO;;AAIA,UAAA,gCAAA,GAAmC,UAAC,MAAD,EAAkC,CAE5E,CAFO;;AAIA,UAAA,qBAAA,GAAwB,UAAC,MAAD,EAAgF;AAC9G,aAAO,cAAA,CAAA,QAAA,CAAS,MAAT,CAAgB,MAAK,aAArB,EAAoC;AACzC,QAAA,OAAO,EAAE,YAAA,CAAA,UAAA,CAAW,MAAX,CAAkB,MAAM,CAAC,MAAzB,EAAiC,CAAC,MAAM,CAAC,MAAzC,CADgC;AAEzC,QAAA,QAAQ,EAAE,GAF+B;AAGzC,QAAA,MAAM,EAAE,cAAA,CAAA,MAAA,CAAO,MAH0B;AAIzC,QAAA,eAAe,EAAE,cAAA,CAAA,QAAA,CAAS,EAAT,KAAgB;AAJQ,OAApC,CAAP;AAMD,KAPO;;AASA,UAAA,QAAA,GAAW,UAAC,KAAD,EAA6B;AAC9C,YAAK,cAAL,GAAsB,KAAK,CAAC,WAAN,CAAkB,MAAlB,CAAyB,KAA/C;;AAEA,YAAK,cAAL,CAAoB;AAClB,QAAA,MAAM,EAAE,MAAK,cAAL,GAAsB,MAAK,KAAL,CAAW,gBADvB;AAElB,QAAA,QAAQ,EAAE;AAFQ,OAApB;AAID,KAPO;;AASA,UAAA,iBAAA,GAAoB,YAAgB;AAC1C,UAAM,YAAY,GAAW,MAAM,MAAK,KAAL,CAAW,SAA9C;AAEA,aAAO;AACL,QAAA,KAAK,EAAK,YAAL,MADA;AAIL,QAAA,SAAS,EAAE,CAAC;AAAE,UAAA,UAAU,EAAE,MAAK;AAAnB,SAAD;AAJN,OAAP;AAMD,KATO;;AAnFV;AA0GC;;;;WAjGQ,6BAAiB;AACtB,WAAK,aAAL,CAAmB,WAAnB,CAA+B,KAAK,oCAApC;AACD;;;WAEM,+BAAsB,SAAtB,EAAkD;AACvD,aAAO,KAAK,KAAL,CAAW,gBAAX,KAAgC,SAAS,CAAC,gBAAjD;AACD;;;WAEM,8BAAkB;AAAA,UACG,KADH,GACa,KAAK,KADlB,CACf,gBADe;AAGvB,WAAK,aAAL,CAAmB;AACjB,QAAA,KAAK,EAAL,KADiB;AAEjB,QAAA,QAAQ,EAAE;AAFO,OAAnB;AAID;;;WAEM,gCAAoB;AACzB,WAAK,aAAL,CAAmB,kBAAnB;AACD;;;WAUM,uBAAc,MAAd,EAA2D;AAAA,UACxD,KADwD,GACrC,MADqC,CACxD,KADwD;AAAA,UAC9C,IAD8C,4BACrC,MADqC;;AAEhE,UAAM,MAAM,GAAW,KAAK,cAAL,GAAsB,KAA7C;AAEA,WAAK,cAAL;AAAsB,QAAA,MAAM,EAAN;AAAtB,SAAiC,IAAjC;AACD;;;WAUM,wBAAe,MAAf,EAA6D;AAClE,WAAK,qBAAL,CAA2B,MAA3B,EAAmC,KAAnC,CAAyC,KAAK,gCAA9C;AACD;;;WAuCM,kBAAM;AAAA,wBACqB,KAAK,KAD1B;AAAA,UACH,KADG,eACH,KADG;AAAA,UACO,SADP;;AAEX,UAAM,QAAQ,GAAc,KAAK,iBAAL,EAA5B;AAEA,aACE,OAAA,CAAA,OAAA,CAAA,aAAA,CAAC,cAAA,CAAA,QAAA,CAAS,IAAV,EAAc,SAAA,EAAA,EACR,SADQ,EACC;AACb,QAAA,KAAK,EAAE,CAAC,KAAD,EAAQ,QAAR,CADM;AAEb,QAAA,QAAQ,EAAE,KAAK;AAFF,OADD,CAAd,CADF;AAOD;;;;EAzG+B,OAAA,CAAA,OAAA,CAAM,S;;AAAxC,OAAA,CAAA,YAAA,GAAA,YAAA;AAES,YAAA,CAAA,YAAA,GAA2C;AAChD,EAAA,gBAAgB,EAAE;AAD8B,CAA3C","sourceRoot":"","sourcesContent":["\"use strict\";\r\n/**\r\n * @license\r\n * Copyright Akveo. All Rights Reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n */\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst react_1 = __importDefault(require(\"react\"));\r\nconst react_native_1 = require(\"react-native\");\r\nconst devsupport_1 = require(\"../../devsupport\");\r\nclass TabIndicator extends react_1.default.Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.contentOffset = new react_native_1.Animated.Value(0);\r\n        this.onContentOffsetAnimationStateChanged = (state) => {\r\n            // no-op\r\n        };\r\n        this.onContentOffsetAnimationStateEnd = (result) => {\r\n            // no-op\r\n        };\r\n        this.createOffsetAnimation = (params) => {\r\n            return react_native_1.Animated.timing(this.contentOffset, {\r\n                toValue: devsupport_1.RTLService.select(params.offset, -params.offset),\r\n                duration: 200,\r\n                easing: react_native_1.Easing.linear,\r\n                useNativeDriver: react_native_1.Platform.OS !== 'web',\r\n            });\r\n        };\r\n        this.onLayout = (event) => {\r\n            this.indicatorWidth = event.nativeEvent.layout.width;\r\n            this.scrollToOffset({\r\n                offset: this.indicatorWidth * this.props.selectedPosition,\r\n                animated: false,\r\n            });\r\n        };\r\n        this.getComponentStyle = () => {\r\n            const widthPercent = 100 / this.props.positions;\r\n            return {\r\n                width: `${widthPercent}%`,\r\n                // @ts-ignore: RN has no types for `Animated` styles\r\n                transform: [{ translateX: this.contentOffset }],\r\n            };\r\n        };\r\n    }\r\n    componentDidMount() {\r\n        this.contentOffset.addListener(this.onContentOffsetAnimationStateChanged);\r\n    }\r\n    shouldComponentUpdate(nextProps) {\r\n        return this.props.selectedPosition !== nextProps.selectedPosition;\r\n    }\r\n    componentDidUpdate() {\r\n        const { selectedPosition: index } = this.props;\r\n        this.scrollToIndex({\r\n            index,\r\n            animated: true,\r\n        });\r\n    }\r\n    componentWillUnmount() {\r\n        this.contentOffset.removeAllListeners();\r\n    }\r\n    /**\r\n     * scrolls indicator to passed index\r\n     *\r\n     * @param params (object) - {\r\n     *  index: number,\r\n     *  animated: boolean | undefined\r\n     * }\r\n     */\r\n    scrollToIndex(params) {\r\n        const { index, ...rest } = params;\r\n        const offset = this.indicatorWidth * index;\r\n        this.scrollToOffset({ offset, ...rest });\r\n    }\r\n    /**\r\n     * scrolls indicator to passed offset\r\n     *\r\n     * @param params (object) - {\r\n     *  offset: number,\r\n     *  animated: boolean | undefined\r\n     * }\r\n     */\r\n    scrollToOffset(params) {\r\n        this.createOffsetAnimation(params).start(this.onContentOffsetAnimationStateEnd);\r\n    }\r\n    render() {\r\n        const { style, ...viewProps } = this.props;\r\n        const evaStyle = this.getComponentStyle();\r\n        return (react_1.default.createElement(react_native_1.Animated.View, Object.assign({}, viewProps, { style: [style, evaStyle], onLayout: this.onLayout })));\r\n    }\r\n}\r\nexports.TabIndicator = TabIndicator;\r\nTabIndicator.defaultProps = {\r\n    selectedPosition: 0,\r\n};\r\n//# sourceMappingURL=tabIndicator.component.js.map"]},"metadata":{},"sourceType":"script"}