{"ast":null,"code":"\"use strict\";\n/**\r\n * @license\r\n * Copyright Akveo. All Rights Reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n */\n\nvar _extends = require(\"@babel/runtime/helpers/extends\");\n\nvar _objectWithoutProperties = require(\"@babel/runtime/helpers/objectWithoutProperties\");\n\nvar _defineProperty = require(\"@babel/runtime/helpers/defineProperty\");\n\nvar _classCallCheck = require(\"@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"@babel/runtime/helpers/createClass\");\n\nvar _inherits = require(\"@babel/runtime/helpers/inherits\");\n\nvar _possibleConstructorReturn = require(\"@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"@babel/runtime/helpers/getPrototypeOf\");\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar react_1 = __importDefault(require(\"react\"));\n\nvar hoist_non_react_statics_1 = __importDefault(require(\"hoist-non-react-statics\"));\n\nvar styleConsumer_service_1 = require(\"./styleConsumer.service\");\n\nvar mappingContext_1 = require(\"../mapping/mappingContext\");\n\nvar themeContext_1 = require(\"../theme/themeContext\");\n\nexports.styled = function (name) {\n  return function (component) {\n    return styleInjector(component, name);\n  };\n};\n\nvar styleInjector = function styleInjector(Component, name) {\n  if (!name) {\n    console.warn('Components annotated with @styled function should also have its in mapping.json.');\n    return null;\n  }\n\n  var Wrapper = function (_react_1$default$Comp) {\n    _inherits(Wrapper, _react_1$default$Comp);\n\n    var _super = _createSuper(Wrapper);\n\n    function Wrapper() {\n      var _this;\n\n      _classCallCheck(this, Wrapper);\n\n      _this = _super.apply(this, arguments);\n      _this.state = {\n        interaction: []\n      };\n      _this.init = false;\n\n      _this.onInit = function (style, theme) {\n        _this.service = new styleConsumer_service_1.StyleConsumerService(name, style);\n        _this.defaultProps = _this.service.createDefaultProps();\n        _this.init = true;\n      };\n\n      _this.onDispatch = function (interaction) {\n        _this.setState({\n          interaction: interaction\n        });\n      };\n\n      _this.withEvaProp = function (sourceProps, sourceStyle, theme) {\n        var props = _objectSpread(_objectSpread({}, _this.defaultProps), sourceProps);\n\n        var style = _this.service.createStyleProp(props, sourceStyle, theme, _this.state.interaction);\n\n        return _objectSpread(_objectSpread({}, props), {}, {\n          eva: {\n            theme: theme,\n            style: style,\n            dispatch: _this.onDispatch\n          }\n        });\n      };\n\n      _this.renderWrappedElement = function (style, theme) {\n        if (!_this.init) {\n          _this.onInit(style, theme);\n        }\n\n        var _this$props = _this.props,\n            forwardedRef = _this$props.forwardedRef,\n            restProps = _objectWithoutProperties(_this$props, [\"forwardedRef\"]);\n\n        return react_1.default.createElement(Component, _extends({}, _this.withEvaProp(restProps, style, theme), {\n          ref: forwardedRef\n        }));\n      };\n\n      return _this;\n    }\n\n    _createClass(Wrapper, [{\n      key: \"render\",\n      value: function render() {\n        var _this2 = this;\n\n        return react_1.default.createElement(mappingContext_1.MappingContext.Consumer, null, function (style) {\n          return react_1.default.createElement(themeContext_1.ThemeContext.Consumer, null, function (theme) {\n            return _this2.renderWrappedElement(style, theme);\n          });\n        });\n      }\n    }]);\n\n    return Wrapper;\n  }(react_1.default.Component);\n\n  var WrappingElement = function WrappingElement(props, ref) {\n    return react_1.default.createElement(Wrapper, _extends({}, props, {\n      forwardedRef: ref\n    }));\n  };\n\n  var ResultComponent = react_1.default.forwardRef(WrappingElement);\n  ResultComponent.displayName = Component.displayName || Component.name;\n  hoist_non_react_statics_1.default(ResultComponent, Component);\n  return ResultComponent;\n};","map":{"version":3,"sources":["../../../../../src/components/theme/style/styled.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\r\n/**\r\n * @license\r\n * Copyright Akveo. All Rights Reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n */\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst react_1 = __importDefault(require(\"react\"));\r\nconst hoist_non_react_statics_1 = __importDefault(require(\"hoist-non-react-statics\"));\r\nconst styleConsumer_service_1 = require(\"./styleConsumer.service\");\r\nconst mappingContext_1 = require(\"../mapping/mappingContext\");\r\nconst themeContext_1 = require(\"../theme/themeContext\");\r\n/**\r\n * `@styled` is a High Order Function to apply style mapping on a component.\r\n * Used by all UI Kitten components and can be used when building custom components with Eva.\r\n *\r\n * @property {string} appearance - Appearance of component. Default is provided by mapping.\r\n *\r\n * @property {EvaProp} eva - Additional property injected to all `styled` components. Includes following properties:\r\n * `theme` - current theme,\r\n * `style` - style provided by Eva,\r\n * `dispatch` - Function for requesting styles from Eva for current component state.\r\n *\r\n * @param name - Type: {string}. Name of the component in mapping.json.\r\n *\r\n * @overview-example StyledComponentSimpleUsage\r\n * The below examples demonstrate how components can be styled with Eva.\r\n * See [the guide](design-system/custom-component-mapping) for more details.\r\n *\r\n * @overview-example StyledComponentEvaProp\r\n * A styled function injects `eva` property into props of decorated component, where\r\n * theme - a current theme,\r\n * styles - a styles object provided by Eva\r\n * dispatch - a function to request styles for a particular state.\r\n *\r\n * ```\r\n * interface EvaProp {\r\n *   theme: ThemeType;\r\n *   style: StyleType;\r\n *   dispatch: (interaction: Interaction[]) => void;\r\n * }\r\n * ```\r\n *\r\n * @overview-example StyledComponentStates\r\n * Styled components may describe its style for a particular state.\r\n *\r\n * Let's say we don't like the standard behavior of TouchableOpacity when it's pressed and\r\n * we want the component to change it's color rather being highlighted.\r\n *\r\n * We define an active state in `meta` key and in mapping, so that component will change `backgroundColor`,\r\n * when `active` is requested. To do this, we call `dispatch` function when Touchable is pressed.\r\n * Then, when touch is released, we request nothing, which stands for `default`.\r\n *\r\n * @overview-example StyledComponentVariants\r\n * Now let's say we want to have a `status` property to make component change its color, for example,\r\n * within the forms validation. Furthermore, we want to control its color for both statuses when it is pressed.\r\n *\r\n * The `variantGroups` key in `meta` defines all properties that can be applied by component.\r\n * Each key in variant group is a string value that can be passed to component props.\r\n */\r\nexports.styled = (name) => {\r\n    return (component) => {\r\n        return styleInjector(component, name);\r\n    };\r\n};\r\nconst styleInjector = (Component, name) => {\r\n    if (!name) {\r\n        console.warn('Components annotated with @styled function should also have its in mapping.json.');\r\n        return null;\r\n    }\r\n    class Wrapper extends react_1.default.Component {\r\n        constructor() {\r\n            super(...arguments);\r\n            this.state = {\r\n                interaction: [],\r\n            };\r\n            this.init = false;\r\n            this.onInit = (style, theme) => {\r\n                this.service = new styleConsumer_service_1.StyleConsumerService(name, style);\r\n                this.defaultProps = this.service.createDefaultProps();\r\n                this.init = true;\r\n            };\r\n            this.onDispatch = (interaction) => {\r\n                this.setState({ interaction });\r\n            };\r\n            this.withEvaProp = (sourceProps, sourceStyle, theme) => {\r\n                const props = { ...this.defaultProps, ...sourceProps };\r\n                const style = this.service.createStyleProp(props, sourceStyle, theme, this.state.interaction);\r\n                return {\r\n                    ...props,\r\n                    eva: {\r\n                        theme,\r\n                        style,\r\n                        dispatch: this.onDispatch,\r\n                    },\r\n                };\r\n            };\r\n            this.renderWrappedElement = (style, theme) => {\r\n                if (!this.init) {\r\n                    this.onInit(style, theme);\r\n                }\r\n                const { forwardedRef, ...restProps } = this.props;\r\n                return (react_1.default.createElement(Component, Object.assign({}, this.withEvaProp(restProps, style, theme), { ref: forwardedRef })));\r\n            };\r\n        }\r\n        render() {\r\n            return (react_1.default.createElement(mappingContext_1.MappingContext.Consumer, null, (style) => (react_1.default.createElement(themeContext_1.ThemeContext.Consumer, null, (theme) => {\r\n                return this.renderWrappedElement(style, theme);\r\n            }))));\r\n        }\r\n    }\r\n    const WrappingElement = (props, ref) => {\r\n        return (react_1.default.createElement(Wrapper, Object.assign({}, props, { forwardedRef: ref })));\r\n    };\r\n    const ResultComponent = react_1.default.forwardRef(WrappingElement);\r\n    ResultComponent.displayName = Component.displayName || Component.name;\r\n    hoist_non_react_statics_1.default(ResultComponent, Component);\r\n    return ResultComponent;\r\n};\r\n//# sourceMappingURL=styled.js.map"]},"metadata":{},"sourceType":"script"}