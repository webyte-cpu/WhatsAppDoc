{"ast":null,"code":"\"use strict\";\n/**\r\n * @license\r\n * Copyright Akveo. All Rights Reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n */\n\nvar _objectWithoutProperties = require(\"@babel/runtime/helpers/objectWithoutProperties\");\n\nvar _extends = require(\"@babel/runtime/helpers/extends\");\n\nvar _classCallCheck = require(\"@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"@babel/runtime/helpers/createClass\");\n\nvar _inherits = require(\"@babel/runtime/helpers/inherits\");\n\nvar _possibleConstructorReturn = require(\"@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"@babel/runtime/helpers/getPrototypeOf\");\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar react_1 = __importDefault(require(\"react\"));\n\nvar react_native_1 = require(\"react-native-web/dist/index\");\n\nvar input_component_1 = require(\"../input/input.component\");\n\nvar list_component_1 = require(\"../list/list.component\");\n\nvar popover_component_1 = require(\"../popover/popover.component\");\n\nvar Autocomplete = function (_react_1$default$Comp) {\n  _inherits(Autocomplete, _react_1$default$Comp);\n\n  var _super = _createSuper(Autocomplete);\n\n  function Autocomplete() {\n    var _this;\n\n    _classCallCheck(this, Autocomplete);\n\n    _this = _super.apply(this, arguments);\n    _this.state = {\n      listVisible: false\n    };\n    _this.popoverRef = react_1.default.createRef();\n    _this.inputRef = react_1.default.createRef();\n\n    _this.show = function () {\n      var _this$popoverRef$curr;\n\n      (_this$popoverRef$curr = _this.popoverRef.current) == null ? void 0 : _this$popoverRef$curr.show();\n    };\n\n    _this.hide = function () {\n      var _this$popoverRef$curr2;\n\n      (_this$popoverRef$curr2 = _this.popoverRef.current) == null ? void 0 : _this$popoverRef$curr2.hide();\n    };\n\n    _this.focus = function () {\n      var _this$inputRef$curren;\n\n      (_this$inputRef$curren = _this.inputRef.current) == null ? void 0 : _this$inputRef$curren.focus();\n    };\n\n    _this.blur = function () {\n      var _this$inputRef$curren2;\n\n      (_this$inputRef$curren2 = _this.inputRef.current) == null ? void 0 : _this$inputRef$curren2.blur();\n    };\n\n    _this.isFocused = function () {\n      var _this$inputRef$curren3;\n\n      return (_this$inputRef$curren3 = _this.inputRef.current) == null ? void 0 : _this$inputRef$curren3.isFocused();\n    };\n\n    _this.clear = function () {\n      var _this$inputRef$curren4;\n\n      (_this$inputRef$curren4 = _this.inputRef.current) == null ? void 0 : _this$inputRef$curren4.clear();\n    };\n\n    _this.onInputFocus = function (event) {\n      _this.setOptionsListVisible();\n\n      _this.props.onFocus && _this.props.onFocus(event);\n    };\n\n    _this.onInputSubmitEditing = function (e) {\n      _this.setOptionsListInvisible();\n\n      _this.props.onSubmitEditing && _this.props.onSubmitEditing(e);\n    };\n\n    _this.onBackdropPress = function () {\n      _this.blur();\n\n      _this.setOptionsListInvisible();\n    };\n\n    _this.onItemPress = function (index) {\n      if (_this.props.onSelect) {\n        _this.setOptionsListInvisible();\n\n        _this.props.onSelect(index);\n      }\n    };\n\n    _this.setOptionsListVisible = function () {\n      var hasData = _this.data.length > 0;\n      hasData && _this.setState({\n        listVisible: true\n      });\n    };\n\n    _this.setOptionsListInvisible = function () {\n      _this.setState({\n        listVisible: false\n      });\n    };\n\n    _this.renderItem = function (info) {\n      return react_1.default.cloneElement(info.item, {\n        onPress: function onPress() {\n          return _this.onItemPress(info.index);\n        }\n      });\n    };\n\n    _this.renderInputElement = function (props) {\n      return react_1.default.createElement(react_native_1.View, null, react_1.default.createElement(input_component_1.Input, _extends({}, props, {\n        ref: _this.inputRef,\n        onFocus: _this.onInputFocus,\n        onSubmitEditing: _this.onInputSubmitEditing\n      })));\n    };\n\n    return _this;\n  }\n\n  _createClass(Autocomplete, [{\n    key: \"data\",\n    get: function get() {\n      return react_1.default.Children.toArray(this.props.children || []);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          placement = _this$props.placement,\n          children = _this$props.children,\n          inputProps = _objectWithoutProperties(_this$props, [\"placement\", \"children\"]);\n\n      return react_1.default.createElement(popover_component_1.Popover, {\n        ref: this.popoverRef,\n        style: styles.popover,\n        placement: placement,\n        visible: this.state.listVisible,\n        fullWidth: true,\n        anchor: function anchor() {\n          return _this2.renderInputElement(inputProps);\n        },\n        onBackdropPress: this.onBackdropPress\n      }, react_1.default.createElement(list_component_1.List, {\n        style: styles.list,\n        data: this.data,\n        bounces: false,\n        renderItem: this.renderItem\n      }));\n    }\n  }]);\n\n  return Autocomplete;\n}(react_1.default.Component);\n\nexports.Autocomplete = Autocomplete;\nvar styles = react_native_1.StyleSheet.create({\n  popover: {\n    maxHeight: 192,\n    overflow: 'hidden'\n  },\n  list: {\n    flexGrow: 0,\n    overflow: 'hidden'\n  }\n});","map":{"version":3,"sources":["../../../../../src/components/ui/autocomplete/autocomplete.component.tsx"],"names":[],"mappings":";AAAA;;;;AAIG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEH,IAAA,OAAA,GAAA,eAAA,CAAA,OAAA,CAAA,OAAA,CAAA,CAAA;;;;AAUA,IAAA,iBAAA,GAAA,OAAA,4BAAA;;AAKA,IAAA,gBAAA,GAAA,OAAA,0BAAA;;AACA,IAAA,mBAAA,GAAA,OAAA,gCAAA;;IA4Fa,Y;;;;;AAAb,0BAAA;AAAA;;AAAA;;;AAES,UAAA,KAAA,GAAe;AACpB,MAAA,WAAW,EAAE;AADO,KAAf;AAIC,UAAA,UAAA,GAAa,OAAA,CAAA,OAAA,CAAM,SAAN,EAAb;AACA,UAAA,QAAA,GAAW,OAAA,CAAA,OAAA,CAAM,SAAN,EAAX;;AAMD,UAAA,IAAA,GAAO,YAAW;AAAA;;AACvB,qCAAK,UAAL,CAAgB,OAAhB,2CAAyB,IAAzB;AACD,KAFM;;AAIA,UAAA,IAAA,GAAO,YAAW;AAAA;;AACvB,sCAAK,UAAL,CAAgB,OAAhB,4CAAyB,IAAzB;AACD,KAFM;;AAIA,UAAA,KAAA,GAAQ,YAAW;AAAA;;AACxB,qCAAK,QAAL,CAAc,OAAd,2CAAuB,KAAvB;AACD,KAFM;;AAIA,UAAA,IAAA,GAAO,YAAW;AAAA;;AACvB,sCAAK,QAAL,CAAc,OAAd,4CAAuB,IAAvB;AACD,KAFM;;AAIA,UAAA,SAAA,GAAY,YAAc;AAAA;;AAC/B,uCAAO,MAAK,QAAL,CAAc,OAArB,qBAAO,uBAAuB,SAAvB,EAAP;AACD,KAFM;;AAIA,UAAA,KAAA,GAAQ,YAAW;AAAA;;AACxB,sCAAK,QAAL,CAAc,OAAd,4CAAuB,KAAvB;AACD,KAFM;;AAIC,UAAA,YAAA,GAAe,UAAC,KAAD,EAA+D;AACpF,YAAK,qBAAL;;AACA,YAAK,KAAL,CAAW,OAAX,IAAsB,MAAK,KAAL,CAAW,OAAX,CAAmB,KAAnB,CAAtB;AACD,KAHO;;AAKA,UAAA,oBAAA,GAAuB,UAAC,CAAD,EAAmE;AAChG,YAAK,uBAAL;;AACA,YAAK,KAAL,CAAW,eAAX,IAA8B,MAAK,KAAL,CAAW,eAAX,CAA2B,CAA3B,CAA9B;AACD,KAHO;;AAMA,UAAA,eAAA,GAAkB,YAAW;AACnC,YAAK,IAAL;;AACA,YAAK,uBAAL;AACD,KAHO;;AAKA,UAAA,WAAA,GAAc,UAAC,KAAD,EAAwB;AAC5C,UAAI,MAAK,KAAL,CAAW,QAAf,EAAyB;AACvB,cAAK,uBAAL;;AACA,cAAK,KAAL,CAAW,QAAX,CAAoB,KAApB;AACD;AACF,KALO;;AAOA,UAAA,qBAAA,GAAwB,YAAW;AACzC,UAAM,OAAO,GAAY,MAAK,IAAL,CAAU,MAAV,GAAmB,CAA5C;AACA,MAAA,OAAO,IAAI,MAAK,QAAL,CAAc;AAAE,QAAA,WAAW,EAAE;AAAf,OAAd,CAAX;AACD,KAHO;;AAKA,UAAA,uBAAA,GAA0B,YAAW;AAC3C,YAAK,QAAL,CAAc;AAAE,QAAA,WAAW,EAAE;AAAf,OAAd;AACD,KAFO;;AAIA,UAAA,UAAA,GAAa,UAAC,IAAD,EAA+E;AAClG,aAAO,OAAA,CAAA,OAAA,CAAM,YAAN,CAAmB,IAAI,CAAC,IAAxB,EAA8B;AAAE,QAAA,OAAO,EAAE;AAAA,iBAAM,MAAK,WAAL,CAAiB,IAAI,CAAC,KAAtB,CAAN;AAAA;AAAX,OAA9B,CAAP;AACD,KAFO;;AAIA,UAAA,kBAAA,GAAqB,UAAC,KAAD,EAAoC;AAC/D,aACE,OAAA,CAAA,OAAA,CAAA,aAAA,CAAC,cAAA,CAAA,IAAD,EAAK,IAAL,EACE,OAAA,CAAA,OAAA,CAAA,aAAA,CAAC,iBAAA,CAAA,KAAD,EAAM,SAAA,EAAA,EACA,KADA,EACK;AACT,QAAA,GAAG,EAAE,MAAK,QADD;AAET,QAAA,OAAO,EAAE,MAAK,YAFL;AAGT,QAAA,eAAe,EAAE,MAAK;AAHb,OADL,CAAN,CADF,CADF;AAUD,KAXO;;AAzEV;AA2GC;;;;SAlGC,eAAgB;AACd,aAAO,OAAA,CAAA,OAAA,CAAM,QAAN,CAAe,OAAf,CAAuB,KAAK,KAAL,CAAW,QAAX,IAAuB,EAA9C,CAAP;AACD;;;WA2EM,kBAAM;AAAA;;AAAA,wBACoC,KAAK,KADzC;AAAA,UACH,SADG,eACH,SADG;AAAA,UACQ,QADR,eACQ,QADR;AAAA,UACqB,UADrB;;AAGX,aACE,OAAA,CAAA,OAAA,CAAA,aAAA,CAAC,mBAAA,CAAA,OAAD,EAAQ;AACN,QAAA,GAAG,EAAE,KAAK,UADJ;AAEN,QAAA,KAAK,EAAE,MAAM,CAAC,OAFR;AAGN,QAAA,SAAS,EAAE,SAHL;AAIN,QAAA,OAAO,EAAE,KAAK,KAAL,CAAW,WAJd;AAKN,QAAA,SAAS,EAAE,IALL;AAMN,QAAA,MAAM,EAAE;AAAA,iBAAM,MAAI,CAAC,kBAAL,CAAwB,UAAxB,CAAN;AAAA,SANF;AAON,QAAA,eAAe,EAAE,KAAK;AAPhB,OAAR,EAQE,OAAA,CAAA,OAAA,CAAA,aAAA,CAAC,gBAAA,CAAA,IAAD,EAAK;AACH,QAAA,KAAK,EAAE,MAAM,CAAC,IADX;AAEH,QAAA,IAAI,EAAE,KAAK,IAFR;AAGH,QAAA,OAAO,EAAE,KAHN;AAIH,QAAA,UAAU,EAAE,KAAK;AAJd,OAAL,CARF,CADF;AAiBD;;;;EA1G+B,OAAA,CAAA,OAAA,CAAM,S;;AAAxC,OAAA,CAAA,YAAA,GAAA,YAAA;AA6GA,IAAM,MAAM,GAAG,cAAA,CAAA,UAAA,CAAW,MAAX,CAAkB;AAC/B,EAAA,OAAO,EAAE;AACP,IAAA,SAAS,EAAE,GADJ;AAEP,IAAA,QAAQ,EAAE;AAFH,GADsB;AAK/B,EAAA,IAAI,EAAE;AACJ,IAAA,QAAQ,EAAE,CADN;AAEJ,IAAA,QAAQ,EAAE;AAFN;AALyB,CAAlB,CAAf","sourceRoot":"","sourcesContent":["\"use strict\";\r\n/**\r\n * @license\r\n * Copyright Akveo. All Rights Reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n */\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst react_1 = __importDefault(require(\"react\"));\r\nconst react_native_1 = require(\"react-native\");\r\nconst input_component_1 = require(\"../input/input.component\");\r\nconst list_component_1 = require(\"../list/list.component\");\r\nconst popover_component_1 = require(\"../popover/popover.component\");\r\n/**\r\n * Autocomplete is a normal text input enhanced by a panel of suggested options.\r\n *\r\n * @extends React.Component\r\n *\r\n * @method {() => void} show - Sets data list visible.\r\n *\r\n * @method {() => void} hide - Sets data list invisible.\r\n *\r\n * @method {() => void} focus - Focuses an input field and sets data list visible.\r\n *\r\n * @method {() => void} blur - Removes focus from input field and sets data list invisible.\r\n *\r\n * @method {() => boolean} isFocused - Returns true if the input field is currently focused.\r\n *\r\n * @method {() => void} clear - Removes all text from the input field.\r\n *\r\n * @property {ReactElement<AutocompleteItemProps> | ReactElement<AutocompleteItemProps>[]} children -\r\n * Options displayed within list.\r\n *\r\n * @property {(number) => void} onSelect - Called when option is pressed.\r\n *\r\n * @property {string} status - Status of the component.\r\n * Can be `basic`, `primary`, `success`, `info`, `warning`, `danger` or `control`.\r\n * Defaults to *basic*.\r\n * Useful for giving user a hint on the input validity.\r\n * Use *control* status when needed to display within a contrast container.\r\n *\r\n * @property {string} size - Size of the component.\r\n * Can be `small`, `medium` or `large`.\r\n * Defaults to *medium*.\r\n *\r\n * @property {ReactText | (TextProps) => ReactElement} label - String, number or a function component\r\n * to render to top of the input field.\r\n * If it is a function, expected to return a Text.\r\n *\r\n * @property {(ImageProps) => ReactElement} accessoryLeft - Function component\r\n * to render to start of the text.\r\n * Expected to return an Image.\r\n *\r\n * @property {(ImageProps) => ReactElement} accessoryRight - Function component\r\n * to render to end of the text.\r\n * Expected to return an Image.\r\n *\r\n * @property {string | PopoverPlacement} placement - Position of the options list relative to the input field.\r\n * Can be `left`, `top`, `right`, `bottom`, `left start`, `left end`, `top start`, `top end`, `right start`,\r\n * `right end`, `bottom start` or `bottom end`.\r\n * Defaults to *bottom*.\r\n *\r\n * @property {() => void} onFocus - Called when options list becomes visible.\r\n *\r\n * @property {() => void} onBlur - Called when options list becomes invisible.\r\n *\r\n * @property {InputProps} ...InputProps - Any props applied to Input component.\r\n *\r\n * @overview-example AutocompleteSimpleUsage\r\n * Autocomplete may contain options to be rendered within suggestions list.\r\n * Options should be provided by passing them to children.\r\n *\r\n * @overview-example AutocompleteAccessories\r\n * Autocomplete may contain accessories by passing `accessoryLeft` or `accessoryRight` props.\r\n * By default, we expect it to be images.\r\n *\r\n * @example AutocompleteHandleKeyboard\r\n * On mobile devices, options may be overlapped by keyboard.\r\n * It can be handled with `placement` property.\r\n *\r\n * @example AutocompleteAsync\r\n * For requesting a real-world data by typing, http requests may be sent with debounce.\r\n */\r\nclass Autocomplete extends react_1.default.Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.state = {\r\n            listVisible: false,\r\n        };\r\n        this.popoverRef = react_1.default.createRef();\r\n        this.inputRef = react_1.default.createRef();\r\n        this.show = () => {\r\n            this.popoverRef.current?.show();\r\n        };\r\n        this.hide = () => {\r\n            this.popoverRef.current?.hide();\r\n        };\r\n        this.focus = () => {\r\n            this.inputRef.current?.focus();\r\n        };\r\n        this.blur = () => {\r\n            this.inputRef.current?.blur();\r\n        };\r\n        this.isFocused = () => {\r\n            return this.inputRef.current?.isFocused();\r\n        };\r\n        this.clear = () => {\r\n            this.inputRef.current?.clear();\r\n        };\r\n        this.onInputFocus = (event) => {\r\n            this.setOptionsListVisible();\r\n            this.props.onFocus && this.props.onFocus(event);\r\n        };\r\n        this.onInputSubmitEditing = (e) => {\r\n            this.setOptionsListInvisible();\r\n            this.props.onSubmitEditing && this.props.onSubmitEditing(e);\r\n        };\r\n        this.onBackdropPress = () => {\r\n            this.blur();\r\n            this.setOptionsListInvisible();\r\n        };\r\n        this.onItemPress = (index) => {\r\n            if (this.props.onSelect) {\r\n                this.setOptionsListInvisible();\r\n                this.props.onSelect(index);\r\n            }\r\n        };\r\n        this.setOptionsListVisible = () => {\r\n            const hasData = this.data.length > 0;\r\n            hasData && this.setState({ listVisible: true });\r\n        };\r\n        this.setOptionsListInvisible = () => {\r\n            this.setState({ listVisible: false });\r\n        };\r\n        this.renderItem = (info) => {\r\n            return react_1.default.cloneElement(info.item, { onPress: () => this.onItemPress(info.index) });\r\n        };\r\n        this.renderInputElement = (props) => {\r\n            return (react_1.default.createElement(react_native_1.View, null,\r\n                react_1.default.createElement(input_component_1.Input, Object.assign({}, props, { ref: this.inputRef, onFocus: this.onInputFocus, onSubmitEditing: this.onInputSubmitEditing }))));\r\n        };\r\n    }\r\n    get data() {\r\n        return react_1.default.Children.toArray(this.props.children || []);\r\n    }\r\n    render() {\r\n        const { placement, children, ...inputProps } = this.props;\r\n        return (react_1.default.createElement(popover_component_1.Popover, { ref: this.popoverRef, style: styles.popover, placement: placement, visible: this.state.listVisible, fullWidth: true, anchor: () => this.renderInputElement(inputProps), onBackdropPress: this.onBackdropPress },\r\n            react_1.default.createElement(list_component_1.List, { style: styles.list, data: this.data, bounces: false, renderItem: this.renderItem })));\r\n    }\r\n}\r\nexports.Autocomplete = Autocomplete;\r\nconst styles = react_native_1.StyleSheet.create({\r\n    popover: {\r\n        maxHeight: 192,\r\n        overflow: 'hidden',\r\n    },\r\n    list: {\r\n        flexGrow: 0,\r\n        overflow: 'hidden',\r\n    },\r\n});\r\n//# sourceMappingURL=autocomplete.component.js.map"]},"metadata":{},"sourceType":"script"}