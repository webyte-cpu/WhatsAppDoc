{"ast":null,"code":"\"use strict\";\n/**\r\n * @license\r\n * Copyright Akveo. All Rights Reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n */\n\nvar _classCallCheck = require(\"@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"@babel/runtime/helpers/createClass\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar type_1 = require(\"./type\");\n\nvar PLACEMENT_FAMILIES = [type_1.PopoverPlacements.BOTTOM.rawValue, type_1.PopoverPlacements.TOP.rawValue, type_1.PopoverPlacements.LEFT.rawValue, type_1.PopoverPlacements.RIGHT.rawValue];\n\nvar PopoverPlacementService = function () {\n  function PopoverPlacementService() {\n    _classCallCheck(this, PopoverPlacementService);\n  }\n\n  _createClass(PopoverPlacementService, [{\n    key: \"find\",\n    value: function find(preferredValue, options) {\n      var placement = this.findRecursive(preferredValue, PLACEMENT_FAMILIES, options);\n      return placement || preferredValue;\n    }\n  }, {\n    key: \"findRecursive\",\n    value: function findRecursive(placement, families, options) {\n      var oneOfCurrentFamily = this.findFromFamily(placement, options);\n\n      if (oneOfCurrentFamily) {\n        return oneOfCurrentFamily;\n      }\n\n      var oneOfReversedFamily = this.findFromFamily(placement.reverse(), options);\n\n      if (oneOfReversedFamily) {\n        return oneOfReversedFamily;\n      }\n\n      delete families[families.indexOf(placement.parent().rawValue)];\n      delete families[families.indexOf(placement.reverse().parent().rawValue)];\n      var firstTruthy = families.filter(Boolean)[0];\n\n      if (firstTruthy) {\n        var nextPlacement = type_1.PopoverPlacements.parse(firstTruthy);\n        return this.findRecursive(nextPlacement, families, options);\n      }\n\n      return null;\n    }\n  }, {\n    key: \"findFromFamily\",\n    value: function findFromFamily(placement, options) {\n      var preferredFrame = placement.frame(options);\n\n      if (placement.fits(preferredFrame, options.bounds)) {\n        return placement;\n      }\n\n      return placement.family().find(function (familyValue) {\n        var familyFrame = familyValue.frame(options);\n        return familyValue.fits(familyFrame, options.bounds);\n      });\n    }\n  }]);\n\n  return PopoverPlacementService;\n}();\n\nexports.PopoverPlacementService = PopoverPlacementService;","map":{"version":3,"sources":["../../../../../src/components/ui/popover/placement.service.ts"],"names":[],"mappings":";AAAA;;;;AAIG;;;;;;;;;;AAEH,IAAA,MAAA,GAAA,OAAA,UAAA;;AAOA,IAAM,kBAAkB,GAAa,CACnC,MAAA,CAAA,iBAAA,CAAkB,MAAlB,CAAyB,QADU,EAEnC,MAAA,CAAA,iBAAA,CAAkB,GAAlB,CAAsB,QAFa,EAGnC,MAAA,CAAA,iBAAA,CAAkB,IAAlB,CAAuB,QAHY,EAInC,MAAA,CAAA,iBAAA,CAAkB,KAAlB,CAAwB,QAJW,CAArC;;IAOa,uB;;;;;;;WAEJ,cAAK,cAAL,EAAuC,OAAvC,EAAgE;AACrE,UAAM,SAAS,GAAqB,KAAK,aAAL,CAAmB,cAAnB,EAAmC,kBAAnC,EAAuD,OAAvD,CAApC;AAEA,aAAO,SAAS,IAAI,cAApB;AACD;;;WAEO,uBAAc,SAAd,EAA2C,QAA3C,EAA+D,OAA/D,EAAwF;AAC9F,UAAM,kBAAkB,GAAqB,KAAK,cAAL,CAAoB,SAApB,EAA+B,OAA/B,CAA7C;;AAEA,UAAI,kBAAJ,EAAwB;AACtB,eAAO,kBAAP;AACD;;AAED,UAAM,mBAAmB,GAAqB,KAAK,cAAL,CAAoB,SAAS,CAAC,OAAV,EAApB,EAAyC,OAAzC,CAA9C;;AAEA,UAAI,mBAAJ,EAAyB;AACvB,eAAO,mBAAP;AACD;;AAED,aAAO,QAAQ,CAAC,QAAQ,CAAC,OAAT,CAAiB,SAAS,CAAC,MAAV,GAAmB,QAApC,CAAD,CAAf;AACA,aAAO,QAAQ,CAAC,QAAQ,CAAC,OAAT,CAAiB,SAAS,CAAC,OAAV,GAAoB,MAApB,GAA6B,QAA9C,CAAD,CAAf;AAEA,UAAM,WAAW,GAAW,QAAQ,CAAC,MAAT,CAAgB,OAAhB,EAAyB,CAAzB,CAA5B;;AAEA,UAAI,WAAJ,EAAiB;AACf,YAAM,aAAa,GAAqB,MAAA,CAAA,iBAAA,CAAkB,KAAlB,CAAwB,WAAxB,CAAxC;AAEA,eAAO,KAAK,aAAL,CAAmB,aAAnB,EAAkC,QAAlC,EAA4C,OAA5C,CAAP;AACD;;AAED,aAAO,IAAP;AACD;;;WAEO,wBAAe,SAAf,EAA4C,OAA5C,EAAqE;AAC3E,UAAM,cAAc,GAAU,SAAS,CAAC,KAAV,CAAgB,OAAhB,CAA9B;;AAEA,UAAI,SAAS,CAAC,IAAV,CAAe,cAAf,EAA+B,OAAO,CAAC,MAAvC,CAAJ,EAAoD;AAClD,eAAO,SAAP;AACD;;AAED,aAAO,SAAS,CAAC,MAAV,GAAmB,IAAnB,CAAwB,UAAC,WAAD,EAA2C;AACxE,YAAM,WAAW,GAAG,WAAW,CAAC,KAAZ,CAAkB,OAAlB,CAApB;AAEA,eAAO,WAAW,CAAC,IAAZ,CAAiB,WAAjB,EAA8B,OAAO,CAAC,MAAtC,CAAP;AACD,OAJM,CAAP;AAKD;;;;;;AA/CH,OAAA,CAAA,uBAAA,GAAA,uBAAA","sourceRoot":"","sourcesContent":["\"use strict\";\r\n/**\r\n * @license\r\n * Copyright Akveo. All Rights Reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst type_1 = require(\"./type\");\r\nconst PLACEMENT_FAMILIES = [\r\n    type_1.PopoverPlacements.BOTTOM.rawValue,\r\n    type_1.PopoverPlacements.TOP.rawValue,\r\n    type_1.PopoverPlacements.LEFT.rawValue,\r\n    type_1.PopoverPlacements.RIGHT.rawValue,\r\n];\r\nclass PopoverPlacementService {\r\n    find(preferredValue, options) {\r\n        const placement = this.findRecursive(preferredValue, PLACEMENT_FAMILIES, options);\r\n        return placement || preferredValue;\r\n    }\r\n    findRecursive(placement, families, options) {\r\n        const oneOfCurrentFamily = this.findFromFamily(placement, options);\r\n        if (oneOfCurrentFamily) {\r\n            return oneOfCurrentFamily;\r\n        }\r\n        const oneOfReversedFamily = this.findFromFamily(placement.reverse(), options);\r\n        if (oneOfReversedFamily) {\r\n            return oneOfReversedFamily;\r\n        }\r\n        delete families[families.indexOf(placement.parent().rawValue)];\r\n        delete families[families.indexOf(placement.reverse().parent().rawValue)];\r\n        const firstTruthy = families.filter(Boolean)[0];\r\n        if (firstTruthy) {\r\n            const nextPlacement = type_1.PopoverPlacements.parse(firstTruthy);\r\n            return this.findRecursive(nextPlacement, families, options);\r\n        }\r\n        return null;\r\n    }\r\n    findFromFamily(placement, options) {\r\n        const preferredFrame = placement.frame(options);\r\n        if (placement.fits(preferredFrame, options.bounds)) {\r\n            return placement;\r\n        }\r\n        return placement.family().find((familyValue) => {\r\n            const familyFrame = familyValue.frame(options);\r\n            return familyValue.fits(familyFrame, options.bounds);\r\n        });\r\n    }\r\n}\r\nexports.PopoverPlacementService = PopoverPlacementService;\r\n//# sourceMappingURL=placement.service.js.map"]},"metadata":{},"sourceType":"script"}